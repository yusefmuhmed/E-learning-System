<!-- index2.html -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Teacher Client</title>
</head>
<body>
    <h1>Teacher Page</h1>
    <script>
        let socket = new WebSocket('ws://localhost:3030');

        socket.addEventListener('open', function (event) {
            console.log('WebSocket connected as teacher');
        });

        socket.addEventListener('message', function (event) {
            // Assume the message is a JSON string
            console.log(event);
            //const data = JSON.parse(event.data);
            if (event.data.type === 'connect to teacher') {
                confirmStudentRequest(data.studentId);
            }
        });

        function confirmStudentRequest(studentId) {
            const confirmed = confirm(`Student ${studentId} wants to connect. Do you accept?`);
            const response = JSON.stringify({
              type: 'connect response',
              studentId,
              response: confirmed ? 'accept' : 'decline'
            });
            socket.send(response);
        }
    </script>
</body>
</html>